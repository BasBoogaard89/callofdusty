<div class="quests">
    @for (q of quests; track q.chore.id) {
    <mat-card [class.is-flipped]="isOpen(q.chore.id)">
        @if (!isOpen(q.chore.id)) {
        <div class="image-holder" mat-card-image>
            <img src="assets/map.png" />
            <p class="flex">
                <mat-icon>place</mat-icon>
                {{q.roomDescription}}
            </p>
            <span class="badge"
                    [class.badge-on-time]="q.daysSince < q.chore.frequencyDays"
                [class.badge-late]="q.daysSince >= q.chore.frequencyDays && q.daysSince <= q.chore.frequencyDays * 10"
                [class.badge-forgotten]="q.daysSince > q.chore.frequencyDays * 10">{{q.daysSince}}</span>
        </div>
        <mat-card-content>
            <p>
                {{q.questDescription}}
            </p>
        </mat-card-content>
        <mat-card-actions>
            <button matButton (click)="toggle(q.chore.id)"><mat-icon>subject</mat-icon> Details</button>
            <button matButton (click)="startQuest(q)"><mat-icon>play_arrow</mat-icon> Start quest</button>
        </mat-card-actions>
        } @else {
            <mat-card-content>
                <h3>Details</h3>
                <p>Room: {{ q.chore.room.description }}</p>
                <p>Duur: {{ q.chore.durationMinutes }} min</p>
                <p>Frequentie: {{ q.chore.frequencyDays ?? 'â€”' }} dagen</p>
            </mat-card-content>
            <mat-card-actions>
                <button matButton (click)="toggle(q.chore.id)"><mat-icon>undo</mat-icon> Terug</button>
                <button matButton (click)="startQuest(q)"><mat-icon>play_arrow</mat-icon> Start quest</button>
            </mat-card-actions>
        }
    </mat-card>
    }
</div>

<pre>{{ quests | json }}</pre>